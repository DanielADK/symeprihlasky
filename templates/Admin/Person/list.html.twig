{# /src/templates/Admin/Person/list.html.twig #}
{% extends "Admin/base.html.twig" %}
{% block title %}E-Přihlášky - Seznam uživatelů{% endblock %}
{% block stylesheets %}
    <link rel="stylesheet" type="text/css" href="{{ asset('adminlte/bower_components/datatables.net-bs/css/dataTables.bootstrap.min.css') }}">
{% endblock %}
{% block content %}
    <section class="content-wrapper">
        {% include "Admin/Modules/page_path_list.html.twig" %}

        <!-- Main content -->
        <section class="content container-fluid">

            <section class="col-xs-12">
                <div class="box box-primary">
                    <div class="box-header">
                        <i class="fa fa-list"></i>
                        <h1 class="box-title"> Všechny děti</h1>
                        <div class="box-tools pull-right">
                            <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                            </button>
                        </div>
                    </div>
                    <!-- /.box-header -->
                    <div class="box-body">
                        <table id="allPeople" class="table table-hover table-striped table-bordered table-responsive">
                            <thead>
                            <tr class="text-center">
                                <th>ID</th>
                                <th>Jméno <br>a příjmení</th>
                                <th>Pohlaví</th>
                                <th>Bydliště</th>
                                <th>Bydliště</th>
                            </tr>
                            </thead>
                        </table>
                    </div>
                    <!-- /.box-body -->
                </div>
                <!-- /.box -->
            </section>
            <script>
                $(document).ready(function () {
                    $('#allPeople').DataTable({
                        "ajax": {
                            "url": "/api/people?active=true",
                            "dataSrc": ""
                        },
                        "paging": true,
                        responsive: true,
                        dom: 'Bfrtipl',
                        buttons: [
                            {
                                text: "<i class=\"fa fa-refresh\"></i>",
                                action: function (e, dt) {
                                    dt.ajax.reload();
                                }
                            }, 'excel', 'csv'],
                        "columns": [
                            {"data": "id"},
                            {
                                "data": null,
                                render: function (data) {
                                    return "<a href=\"/admin/seznamdite/" + data.id + "\">" +
                                        data.name +
                                        " " +
                                        data.surname +
                                        "</a>";
                                }
                            },
                            {
                                "data": null,
                                render: function (data) {
                                    return ajaxPrepare("sex", data);
                                }
                            },
                            {
                                "data": null,
                                render: function (data) {
                                    return ajaxPrepare("address", data.address);
                                }
                            },
                            {"data": "shirt_size"},
                            /*{
                                "data": null,
                                "className": "text-center",
                                render: function (data) {
                                    return ajaxPrepare("yesno", data.ctu_member);
                                }
                            }*/
                        ],
                        "language": {
                            "url": "https://cdn.datatables.net/plug-ins/1.11.0/i18n/cs.json"
                        },
                        "order": [[0, 'asc']]
                    });
                });

            </script>

        </section>
    </section>
{% endblock %}
{% block javascripts %}
    <script src="{{ asset("adminlte/bower_components/datatables.net/js/jquery.dataTables.min.js") }}"></script>
    <script src="{{ asset("adminlte/bower_components/datatables.net-bs/js/dataTables.bootstrap.min.js") }}"></script>
{% endblock %}